(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8720:function(e,r,t){Promise.resolve().then(t.bind(t,2078))},2078:function(e,r,t){"use strict";t.d(r,{DropBoxComponent:function(){return T}});var a,n,s=t(7437),i=t(2265),o=t(7598),d=t(7689),l=t(1817),c=t(2735),u=t(8930),f=t(9076),m=t(7053),p=t(7712),h=t(1994),x=t(3335);function g(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,x.m6)((0,h.W)(r))}let v=(0,p.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),y=i.forwardRef((e,r)=>{let{className:t,variant:a,size:n,asChild:i=!1,...o}=e,d=i?m.g7:"button";return(0,s.jsx)(d,{className:g(v({variant:a,size:n,className:t})),ref:r,...o})});y.displayName="Button";var b=t(653),j=t(8391);let w=j.fC;j.ZA;let N=j.B4,C=i.forwardRef((e,r)=>{let{className:t,children:a,...n}=e;return(0,s.jsxs)(j.xz,{ref:r,className:g("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[a,(0,s.jsx)(j.JO,{asChild:!0,children:(0,s.jsx)(b.jnn,{className:"h-4 w-4 opacity-50"})})]})});C.displayName=j.xz.displayName;let k=i.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(j.u_,{ref:r,className:g("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(b.g8U,{})})});k.displayName=j.u_.displayName;let _=i.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(j.$G,{ref:r,className:g("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(b.v4q,{})})});_.displayName=j.$G.displayName;let z=i.forwardRef((e,r)=>{let{className:t,children:a,position:n="popper",...i}=e;return(0,s.jsx)(j.h_,{children:(0,s.jsxs)(j.VY,{ref:r,className:g("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...i,children:[(0,s.jsx)(k,{}),(0,s.jsx)(j.l_,{className:g("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,s.jsx)(_,{})]})})});z.displayName=j.VY.displayName,i.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(j.__,{ref:r,className:g("px-2 py-1.5 text-sm font-semibold",t),...a})}).displayName=j.__.displayName;let R=i.forwardRef((e,r)=>{let{className:t,children:a,...n}=e;return(0,s.jsxs)(j.ck,{ref:r,className:g("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[(0,s.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(j.wU,{children:(0,s.jsx)(b.nQG,{className:"h-4 w-4"})})}),(0,s.jsx)(j.eT,{children:a})]})});R.displayName=j.ck.displayName,i.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(j.Z0,{ref:r,className:g("-mx-1 my-1 h-px bg-muted",t),...a})}).displayName=j.Z0.displayName;let E=(0,p.j)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-secondary-foreground hover:bg-secondary/80"}},defaultVariants:{variant:"default"}});function F(e){let{className:r,variant:t,...a}=e;return(0,s.jsx)("div",{className:g(E({variant:t}),r),...a})}function T(){let[e,r]=(0,i.useState)([]),[t,a]=(0,i.useState)(!1),[m,p]=(0,i.useState)(!1),h=(0,i.useCallback)(e=>{r(r=>[...r,...e.map(e=>({file:e,paperType:"Blank"}))])},[]),{getRootProps:x,getInputProps:g,isDragActive:v}=(0,o.uI)({onDrop:h,accept:{"application/pdf":[".pdf"]}}),b=(e,t)=>{r(r=>r.map((r,a)=>a===e?{...r,paperType:t}:r))},j=e=>{r(r=>r.filter((r,t)=>t!==e))},k=async t=>{r(e=>e.map((e,r)=>r===t?{...e,downloaded:!0}:e));try{let r=await fetch("https://davidetarulli.pythonanywhere.com"+e[t].fileConverted);if(!r.ok)throw Error("Errore durante il download del file");let a=await r.blob(),n=window.URL.createObjectURL(a),s=document.createElement("a");s.href=n,s.download=e[t].file.name,document.body.appendChild(s),s.click(),s.remove(),window.URL.revokeObjectURL(n)}catch(e){console.error("Errore durante il download del file:",e)}},_=async e=>{let t=new FormData;t.append("pdftoconvert",e.file),t.append("paper_type",e.paperType),r(r=>r.map(r=>r.file===e.file?{...r,isConverting:!0,errorConverting:!1}:r));try{let a=await fetch("https://davidetarulli.pythonanywhere.com/generate",{method:"POST",mode:"cors",body:t});if(!a.ok)throw Error();let n=await a.json();if(!n)throw Error();r(r=>r.map(r=>r.file===e.file?{...r,isConverting:!1,fileConverted:n.download_link,errorConverting:!1}:r))}catch(t){throw r(r=>r.map(r=>r.file===e.file?{...r,isConverting:!1,errorConverting:!0}:r)),t}finally{r(r=>r.map(r=>r.file===e.file?{...r,isConverting:!1}:r))}},E=async()=>{a(!0);try{await Promise.all(e.map(e=>_(e))),console.log("Tutti i file sono stati convertiti con successo")}catch(e){console.error("Errore durante la conversione dei file:",e)}finally{a(!1),p(!0)}};return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{...x(),className:"w-full border-2 border-dashed rounded-lg p-8 mb-6 text-center cursor-pointer transition-colors ".concat(v?"border-primary bg-primary/10":"border-gray-300 hover:border-primary"," ").concat(t||m?"hidden":""),children:[(0,s.jsx)("input",{...g()}),(0,s.jsx)(d.Z,{className:"mx-auto mb-2",size:24}),(0,s.jsx)("p",{children:v?"Rilascia i file qui":"Trascina i file PDF qui, o clicca per selezionarli"})]}),e.length>0&&(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-3",children:"File caricati"}),(0,s.jsx)("ul",{className:"space-y-3",children:e.map((e,r)=>(0,s.jsxs)("li",{className:"flex items-center justify-between gap-2 p-3 rounded-lg border",children:[(0,s.jsx)("span",{className:"truncate flex-grow",children:e.file.name}),(0,s.jsxs)(w,{value:e.paperType,onValueChange:e=>b(r,e),children:[(0,s.jsx)(C,{className:"w-32",children:(0,s.jsx)(N,{placeholder:"Tipo di carta"})}),(0,s.jsx)(z,{children:Object.values(n).map(e=>(0,s.jsx)(R,{value:e,children:e},e))})]}),(0,s.jsxs)(F,{className:"rounded-full flex gap-2",variant:e.fileConverted?"success":e.errorConverting?"destructive":e.isConverting?"secondary":"outline",children:[e.fileConverted?(0,s.jsx)(s.Fragment,{children:"Terminato"}):null,e.isConverting?(0,s.jsxs)(s.Fragment,{children:["Convertendo ",(0,s.jsx)(l.Z,{size:10,className:"animate-spin"})]}):null,e.errorConverting?(0,s.jsx)(s.Fragment,{children:"Errore"}):null,e.isConverting||e.errorConverting||e.fileConverted?null:(0,s.jsx)(s.Fragment,{children:"Aggiunto"})]}),e.fileConverted?(0,s.jsxs)(y,{disabled:e.downloaded,onClick:()=>k(r),children:[(0,s.jsx)(c.Z,{size:18}),e.downloaded?"Scaricato":"Scarica"]}):e.errorConverting?(0,s.jsx)(s.Fragment,{}):(0,s.jsx)(y,{variant:"destructive",size:"icon",onClick:()=>j(r),className:"",children:(0,s.jsx)(u.Z,{size:18})})]},r))})]}),(0,s.jsx)(y,{onClick:m?()=>window.location.reload():E,disabled:0===e.length||t,className:"w-full",children:t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.Z,{size:18,className:"animate-spin"}),"Convertendo"]}):m?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.Z,{size:18}),"Converti Anccora"]}):(0,s.jsx)(s.Fragment,{children:"Converti"})})]})}(a=n||(n={})).Blank="Blank",a.Lined="Lined",a.Grid="Grid"}},function(e){e.O(0,[310,34,971,117,744],function(){return e(e.s=8720)}),_N_E=e.O()}]);